{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/fullstack/Desktop/TeamWorks/WAKAUT/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/fullstack/Desktop/TeamWorks/WAKAUT/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\fullstack\\\\Desktop\\\\TeamWorks\\\\WAKAUT\\\\next\\\\pages\\\\board\\\\boardlist.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from \"react\";\nimport Alerts from '../../components/alert';\nimport Search from '../../components/search';\nimport { Container } from 'react-bootstrap';\nimport List from '../../components/list';\nimport WriteModal from './write_modal';\nimport getLayout from '../../components/layouts/getLayout';\nimport { Datas } from '../../components/feutils';\nimport { BarLoader } from \"react-spinners\"; //처음 데이터 세팅\n\nvar BoardList = function BoardList(_ref) {\n  _s();\n\n  var boards = _ref.boards,\n      session = _ref.session,\n      atlists = _ref.atlists;\n\n  var _useState = useState(boards.boards),\n      dtfn = _useState[0],\n      setDtfn = _useState[1];\n\n  var _useState2 = useState(2),\n      cnt = _useState2[0],\n      setCnt = _useState2[1];\n\n  var _useState3 = useState(false),\n      lgShow = _useState3[0],\n      setLgShow = _useState3[1];\n\n  var _useState4 = useState('All'),\n      selVal = _useState4[0],\n      setSelval = _useState4[1];\n\n  var _useState5 = useState(''),\n      srhVal = _useState5[0],\n      setSrhVal = _useState5[1];\n\n  var _useState6 = useState(false),\n      srch = _useState6[0],\n      setSrch = _useState6[1];\n\n  var _useState7 = useState(session.userid),\n      uid = _useState7[0],\n      setUid = _useState7[1];\n\n  if (uid > 1000000000) {\n    var tt = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.t0 = console;\n                _context.next = 3;\n                return test;\n\n              case 3:\n                _context.t1 = _context.sent;\n\n                _context.t0.log.call(_context.t0, '최종값:', _context.t1);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function tt() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    var test = selId(uid);\n  }\n\n  function selId(_x) {\n    return _selId.apply(this, arguments);\n  } //스크롤 페이징 처리\n\n\n  function _selId() {\n    _selId = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(uid) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return Datas('/board/boardlist', \"userid=\".concat(uid)).then(function (res) {\n                return res;\n              });\n\n            case 2:\n              res = _context2.sent;\n              _context2.t0 = setUid;\n              _context2.next = 6;\n              return res;\n\n            case 6:\n              _context2.t1 = _context2.sent;\n              (0, _context2.t0)(_context2.t1);\n              _context2.t2 = console;\n              _context2.next = 11;\n              return res;\n\n            case 11:\n              _context2.t3 = _context2.sent;\n              _context2.t4 = '뱉어낸 값:' + _context2.t3;\n\n              _context2.t2.log.call(_context2.t2, _context2.t4);\n\n              _context2.next = 16;\n              return res;\n\n            case 16:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _selId.apply(this, arguments);\n  }\n\n  function handleScroll() {\n    return _handleScroll.apply(this, arguments);\n  } // 스크롤 페이징 데이터 불러오기\n\n\n  function _handleScroll() {\n    _handleScroll = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var scrollHeight, scrollTop, clientHeight, dt;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              scrollHeight = document.documentElement.scrollHeight;\n              scrollTop = document.documentElement.scrollTop;\n              clientHeight = document.documentElement.clientHeight;\n\n              if (!(scrollTop + clientHeight >= scrollHeight)) {\n                _context3.next = 9;\n                break;\n              }\n\n              setCnt(cnt + 1);\n              _context3.next = 7;\n              return dts(cnt * 5);\n\n            case 7:\n              dt = _context3.sent;\n              setDtfn(dt);\n\n            case 9:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _handleScroll.apply(this, arguments);\n  }\n\n  function dts(_x2) {\n    return _dts.apply(this, arguments);\n  } //검색 시 액션\n\n\n  function _dts() {\n    _dts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(i) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return Datas('/board/boardlist', \"pg=\".concat(i, \"&cat=\").concat(selVal, \"&note=\").concat(srhVal)).then(function (res) {\n                return res;\n              });\n\n            case 2:\n              res = _context4.sent;\n              _context4.next = 5;\n              return res.boards;\n\n            case 5:\n              return _context4.abrupt(\"return\", _context4.sent);\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _dts.apply(this, arguments);\n  }\n\n  function sc() {\n    return _sc.apply(this, arguments);\n  } //스크롤 이벤트 등록\n\n\n  function _sc() {\n    _sc = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              setSrch(true);\n              dts(5);\n\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _sc.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    window.addEventListener('scroll', handleScroll, {\n      capture: true\n    });\n    return function () {\n      window.removeEventListener(\"scroll\", handleScroll, {\n        capture: true\n      });\n    };\n  });\n  return __jsx(React.Fragment, null, __jsx(Alerts, {\n    color: \"success\",\n    msg: \"\\uD574\\uB2F9 \\uAC8C\\uC2DC\\uD310\\uC740 \\uAD00\\uB9AC\\uC790\\uC5D0\\uC758\\uD574 \\uC2E4\\uC2DC\\uAC04 \\uAD00\\uB9AC\\uB418\\uACE0\\uC788\\uC2B5\\uB2C8\\uB2E4. \\uD5C8\\uC704\\uC0AC\\uC2E4\\uC720\\uD3EC \\uBC0F \\uBD80\\uC801\\uC808\\uD55C \\uD45C\\uD604\\uC740 \\uCC28\\uB2E8\\uB420 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }), session.userid != 0 ? __jsx(Search, {\n    cat: ['commnunity', 'review'],\n    title: \"All\",\n    btn: ['검색하기', '새글쓰기'],\n    btncol: ['secondary', 'success'],\n    click: [sc, function () {\n      setLgShow(true);\n    }],\n    setSelval: setSelval,\n    setSrhVal: setSrhVal,\n    srhVal: srhVal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }) : __jsx(Search, {\n    cat: ['commnunity', 'review'],\n    title: \"All\",\n    btn: ['검색하기'],\n    btncol: ['secondary'],\n    click: [sc],\n    setSelval: setSelval,\n    setSrhVal: setSrhVal,\n    srhVal: srhVal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }), __jsx(Container, {\n    className: \"lists\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, dtfn.map(function (m, idx) {\n    return __jsx(List, {\n      key: idx,\n      title: m.title,\n      note: m.content,\n      malcnt: m.cmtcnt,\n      img: true,\n      col: \"bg-warning\",\n      time: m.regdate2,\n      kd: m.category,\n      view: m.views,\n      to: \"/board/boardview?bid=\".concat(m.bid),\n      name: m.name,\n      cat: m.facility_name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 28\n      }\n    });\n  }), __jsx(\"div\", {\n    className: \"pg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, __jsx(BarLoader, {\n    color: \"#ccc\",\n    cssOverride: {\n      position: \"absolute\",\n      margin: \"auto\",\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      zIndex: 555\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }))), __jsx(WriteModal, {\n    lgShow: lgShow,\n    setLgShow: setLgShow,\n    sename: session.name,\n    seid: uid,\n    atlists: atlists,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }));\n};\n\n_s(BoardList, \"FmNP6KEaqVVKs5daxQ3P6rrZEHU=\");\n\n_c = BoardList;\ngetLayout(BoardList, {\n  title: '다같이 운동해요! WAKAUT!',\n  description: '워크아웃 커뮤니티 게시판입니다.'\n});\nexport var __N_SSP = true;\nexport default BoardList;\n\nvar _c;\n\n$RefreshReg$(_c, \"BoardList\");","map":{"version":3,"sources":["C:/Users/fullstack/Desktop/TeamWorks/WAKAUT/next/pages/board/boardlist.js"],"names":["useEffect","useState","Alerts","Search","Container","List","WriteModal","getLayout","Datas","BarLoader","BoardList","boards","session","atlists","dtfn","setDtfn","cnt","setCnt","lgShow","setLgShow","selVal","setSelval","srhVal","setSrhVal","srch","setSrch","userid","uid","setUid","tt","console","test","log","selId","then","res","handleScroll","scrollHeight","document","documentElement","scrollTop","clientHeight","dts","dt","i","sc","window","addEventListener","capture","removeEventListener","map","m","idx","title","content","cmtcnt","regdate2","category","views","bid","name","facility_name","position","margin","top","left","right","bottom","zIndex","description"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport Alerts from '../../components/alert';\r\nimport Search from '../../components/search';\r\nimport {Container} from 'react-bootstrap';\r\nimport List from '../../components/list';\r\nimport WriteModal from './write_modal';\r\nimport getLayout from '../../components/layouts/getLayout';\r\nimport {Datas} from '../../components/feutils';\r\nimport { BarLoader } from \"react-spinners\"\r\n\r\n\r\n//처음 데이터 세팅\r\nexport async function getServerSideProps(ctx){\r\n    let boards = await Datas('/board/boardlist','pg=5');\r\n      // 운동목록 리스트 가져오기\r\n    let atlists = await Datas(`/main?lists=y`);\r\n    return{props:{boards,atlists}};   \r\n}\r\n\r\nconst BoardList=({boards,session,atlists})=>{\r\n    let [dtfn,setDtfn] = useState(boards.boards);\r\n    let [cnt,setCnt] = useState(2);\r\n    const [lgShow, setLgShow] = useState(false);\r\n    const [selVal, setSelval] = useState('All');\r\n    const [srhVal, setSrhVal] = useState('');\r\n    const [srch,setSrch] = useState(false);\r\n    const [uid,setUid] = useState(session.userid);\r\n\r\n    if(uid>1000000000){\r\n        let test = selId(uid);\r\n        async function tt(){\r\n            console.log('최종값:',await test);\r\n        }\r\n        \r\n    }\r\n    \r\n    async function selId (uid){\r\n        let res = await Datas('/board/boardlist',`userid=${uid}`).then(res=>res);\r\n        setUid(await res);\r\n        console.log('뱉어낸 값:'+ await res);\r\n        return await res;\r\n    }\r\n\r\n    //스크롤 페이징 처리\r\n    async function handleScroll(){\r\n        const scrollHeight = document.documentElement.scrollHeight;\r\n        const scrollTop = document.documentElement.scrollTop;\r\n        const clientHeight = document.documentElement.clientHeight;\r\n        if (scrollTop + clientHeight >= scrollHeight) {\r\n            setCnt(cnt+1);\r\n            let dt = await dts(cnt*5);\r\n            setDtfn(dt);\r\n        }\r\n    }\r\n\r\n    // 스크롤 페이징 데이터 불러오기\r\n    async function dts(i){\r\n        let res = await Datas('/board/boardlist',`pg=${i}&cat=${selVal}&note=${srhVal}`).then(res=>res);\r\n        return await res.boards;\r\n    }\r\n\r\n    //검색 시 액션\r\n    async function sc(){\r\n        setSrch(true);\r\n        dts(5);\r\n    }\r\n    //스크롤 이벤트 등록\r\n    useEffect(()=>{\r\n        window.addEventListener('scroll', handleScroll, { capture: true });\r\n        return ()=>{\r\n            window.removeEventListener(\"scroll\",handleScroll,{ capture: true });\r\n        }\r\n    })\r\n\r\n    return(\r\n        <>\r\n        <Alerts color='success' msg='해당 게시판은 관리자에의해 실시간 관리되고있습니다. 허위사실유포 및 부적절한 표현은 차단될 수 있습니다.'/>\r\n        {\r\n        (session.userid !=0)?\r\n        <Search cat={['commnunity','review']} title='All' btn={['검색하기','새글쓰기']} btncol={['secondary','success']} click={[sc,()=>{setLgShow(true)}]} setSelval={setSelval} setSrhVal={setSrhVal} srhVal={srhVal}/>:\r\n        <Search cat={['commnunity','review']} title='All' btn={['검색하기']} btncol={['secondary']} click={[sc]} setSelval={setSelval} setSrhVal={setSrhVal} srhVal={srhVal}/>\r\n        }\r\n        <Container className=\"lists\">\r\n            {\r\n                dtfn.map((m,idx)=>{\r\n                    return <List key={idx} title={m.title} note={m.content} malcnt={m.cmtcnt} img={true} col='bg-warning' time={m.regdate2} kd={m.category} view={m.views} to={`/board/boardview?bid=${m.bid}`} name={m.name} cat={m.facility_name} />\r\n                })\r\n            }\r\n            <div className=\"pg\">\r\n                <BarLoader color=\"#ccc\" cssOverride={{position: \"absolute\", margin:\"auto\", top:0,left:0, right:0, bottom:0,zIndex:555}} />\r\n            </div>\r\n        </Container>\r\n        <WriteModal lgShow={lgShow} setLgShow={setLgShow} sename={session.name} seid={uid} atlists={atlists}/>\r\n        </>\r\n    )\r\n}\r\n\r\ngetLayout(BoardList,{title:'다같이 운동해요! WAKAUT!',description:'워크아웃 커뮤니티 게시판입니다.'})\r\nexport default BoardList;\r\n"]},"metadata":{},"sourceType":"module"}