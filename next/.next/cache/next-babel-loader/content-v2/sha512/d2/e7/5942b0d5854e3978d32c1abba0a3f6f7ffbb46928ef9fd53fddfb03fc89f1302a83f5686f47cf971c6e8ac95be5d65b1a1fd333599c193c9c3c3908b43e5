{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Modal from '../components/modal';\nimport { Card, Button } from 'react-bootstrap';\nimport { AiFillStar, AiOutlineHighlight, AiOutlinePhone } from \"react-icons/ai\";\nimport { CiLocationOn, CiFaceSmile } from \"react-icons/ci\";\nimport List from '../components/list';\nimport Link from \"next/link\";\nimport KakaoSet from '../services/kakaoSet';\nimport { Post, kakaoInit } from \"../components/feutils\";\nimport { useState } from \"react\";\n\nconst PlaceModal = props => {\n  let scores = [];\n  const {\n    0: stab,\n    1: setStab\n  } = useState(true);\n  const {\n    0: isCompleteAdd,\n    1: setIsCompleteAdd\n  } = useState(false);\n  const {\n    0: st,\n    1: setSt\n  } = useState(['☆', '☆', '☆', '☆', '☆']);\n  let lis = props.bdList.boards;\n  if (lis == undefined) lis = ['', '']; // 별점관련\n\n  const setStar = idx => {\n    for (let i = 0; i < 5; i++) {\n      if (i <= idx) scores.push('★');else scores.push('☆');\n    }\n\n    if (stab) setSt(scores);\n  };\n\n  const fixStar = async idx => {\n    if (stab) {\n      await Post({\n        facility: props.title,\n        score: idx + 1\n      }, '/member/addscore');\n      setStab(false);\n      props.setPeops(parseInt(props.peops) + 1);\n\n      if (props.score != null) {\n        props.setScs((parseInt(props.score) + (idx + 1)) / 2);\n      } else {\n        props.setScs(idx + 1);\n      }\n    } else {\n      alert('이미 평가하셨습니다 👨');\n    }\n  }; // 즐겨찾기 추가\n\n\n  async function fvrAdd(e, {\n    userid,\n    facility,\n    region,\n    contact\n  }) {\n    e.preventDefault();\n\n    if (userid !== null) {\n      await Post({\n        userid: userid,\n        facility: facility,\n        region: region,\n        contact: contact\n      }, '/member/addfavorites');\n      setIsCompleteAdd(true); // 즐겨찾기 추가 성공 후 콜백함수 호출\n\n      props.onFavoriteAdd();\n    } else location.href = \"/member/login\";\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Modal, {\n    size: props.size,\n    lgShow: props.lgShow,\n    setLgShow: props.setLgShow,\n    class: \"d-flex\",\n    title: \"\\uC815\\uBCF4 \\uC0C1\\uC138\\uBCF4\\uAE30\"\n  }, __jsx(\"div\", {\n    className: \"left col-6 me-1\"\n  }, __jsx(Card, {\n    className: \"border-0\"\n  }, __jsx(Card.Img, {\n    variant: \"top\",\n    src: props.img\n  }), __jsx(Card.Body, null, __jsx(Card.Title, null, \"\\uC2DC\\uC124\\uD3C9\\uAC00\\uD558\\uAE30\"), __jsx(Card.Text, null, \"\\uB2E4\\uB978 \\uC0AC\\uC6A9\\uC790\\uC5D0\\uAC8C \\uC758\\uACAC\\uC744 \\uB4E4\\uB824\\uC8FC\\uC138\\uC694\"), __jsx(Card.Text, {\n    className: \"scores\"\n  }, st.map((m, idx) => __jsx(\"span\", {\n    onMouseOver: () => {\n      setStar(idx);\n    },\n    onClick: () => {\n      fixStar(idx);\n    }\n  }, m))), __jsx(\"div\", {\n    className: \"btns\"\n  }, __jsx(Button, {\n    variant: \"primary\",\n    className: \"fluid\",\n    onClick: e => {\n      fvrAdd(e, {\n        userid: props.userid,\n        facility: props.title,\n        region: props.addr,\n        contact: props.contact\n      });\n    }\n  }, \"\\uC990\\uACA8\\uCC3E\\uAE30 \\uCD94\\uAC00\"), __jsx(Button, {\n    variant: \"warning\",\n    onClick: () => {\n      KakaoSet(kakaoInit(), {\n        props\n      });\n    },\n    className: \"fluid ms-2\"\n  }, \"\\uCE74\\uCE74\\uC624 \\uACF5\\uC720\\uD558\\uAE30\"))))), __jsx(\"div\", {\n    className: \"right col-6 ms-1\"\n  }, __jsx(\"h2\", null, props.title), __jsx(\"p\", null, __jsx(CiLocationOn, null), __jsx(\"span\", null, props.addr)), __jsx(\"p\", null, __jsx(AiOutlinePhone, null), __jsx(\"span\", null, props.contact)), __jsx(\"p\", null, __jsx(AiOutlineHighlight, null), __jsx(\"span\", null, props.des)), __jsx(\"p\", null, __jsx(CiFaceSmile, null), __jsx(\"span\", {\n    className: \"scores\"\n  }, \" \", props.score, \"\\uC810 (\", props.peops, \"\\uBA85\\uC774 \\uD3C9\\uAC00\\uD568)\")), __jsx(\"div\", {\n    className: \"brdPrev mb-5\"\n  }, lis[0] != undefined ? __jsx(List, {\n    title: lis[0].title,\n    note: lis[0].content,\n    kd: lis[0].category,\n    time: lis[0].regdate2,\n    view: lis[0].views\n  }) : '', lis[1] != undefined ? __jsx(List, {\n    title: lis[1].title,\n    note: lis[1].content,\n    kd: lis[1].category,\n    time: lis[1].regdate2,\n    view: lis[1].views\n  }) : __jsx(\"p\", {\n    className: \"mt-2\"\n  }, \"\\uAC8C\\uC2DC\\uAE00\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4. \\uAE00\\uC744 \\uB0A8\\uACA8\\uBCF4\\uC138\\uC694!\\uD83D\\uDE01\")), __jsx(Button, {\n    variant: \"success\"\n  }, \" \", __jsx(Link, {\n    href: \"/board/boardlist\"\n  }, \"\\uAC8C\\uC2DC\\uAE00 \\uB354\\uBCF4\\uAE30\")))), __jsx(Modal, {\n    title: \"\\uC54C\\uB9BC\",\n    class: \"searchModal\",\n    size: \"md\",\n    lgShow: isCompleteAdd,\n    setLgShow: setIsCompleteAdd,\n    children: \"\\uB098\\uC758 \\uC990\\uACA8\\uCC3E\\uAE30\\uC5D0 \\uCD94\\uAC00\\uB410\\uC2B5\\uB2C8\\uB2E4.\",\n    btn: \"\\uC990\\uACA8\\uCC3E\\uAE30 \\uBCF4\\uAE30\",\n    link: \"/member/favorites\"\n  }));\n};\n\nexport default PlaceModal;","map":null,"metadata":{},"sourceType":"module"}