{"ast":null,"code":"import axios from \"axios\";\nimport { XMLParser } from 'fast-xml-parser';\nexport default (async (req, res) => {\n  console.log(\"검색한 단어 : \", req.query);\n  const URL = \" https://openapi.gg.go.kr/PubPhstFtM\";\n  const params = {\n    KEY: \"59c361f5fb304a649662ff8ec90e184f\",\n    Type: \"xml\",\n    pIndex: 1,\n    // pSize를 1000으로 설정하고 pIndex를 2로 설정하면 1001~2000까지의 데이터를 가져옴\n    pSize: 1000 // 데이터 요청은 한번에 최대 1000건\n\n  };\n  const headers = {\n    \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.78\"\n  };\n  const xml = await axios.get(URL, {\n    params: params,\n    headers: headers\n  }); // XML 을 JSON 으로 변환\n\n  const parser = new XMLParser();\n  let json = parser.parse(xml.data);\n  let items = json[\"PubPhstFtM\"][\"row\"];\n\n  if (req.query.srch) {\n    items = items.filter(f => f.FACLT_NM.indexOf(req.query.srch.trim()) !== -1);\n  }\n\n  res.status(200).json(items);\n});","map":null,"metadata":{},"sourceType":"module"}