{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { Container } from 'react-bootstrap';\nimport Title from '../../components/title';\nimport FavoritesList from \"../../components/favorites_list\";\nimport getLayout from \"../../components/layouts/getLayout\";\nimport { Datas, Post } from \"../../components/feutils\";\nimport { getSession } from \"next-auth/client\"; // 즐겨찾기 목록 가져오기\n\nexport async function getServerSideProps(ctx) {\n  // 세션 객체 가져오기\n  const session = await getSession(ctx); // 로그인한 사용자의 아이디\n\n  let userid = session.user.userid;\n  let Flist = await Datas('/member/favorites', `userid=${userid}`);\n  return {\n    props: {\n      Flist\n    }\n  };\n}\n\nconst Favorites = ({\n  Flist\n}) => {\n  // '경기도' 다음에 공백이 하나 이상 있는 부분을 찾아서 그 단어들을 추출\n  const regex = /경기도\\s+([^\\s]+)/;\n  let region = null;\n\n  class Fvrlist {\n    constructor(fid, region, gym, contact, btn) {\n      this.fid = fid;\n      this.region = region;\n      this.gym = gym;\n      this.contact = contact;\n      this.btn = btn;\n    }\n\n  }\n\n  const fList = Flist.map(item => {\n    const match = item.region.match(regex);\n    if (match) region = match[1];else region = '';\n    return {\n      fid: item.fid,\n      region: region,\n      facility: item.facility,\n      contact: item.contact\n    };\n  });\n  let lists = [{\n    region: '지역',\n    gym: '시설명',\n    contact: '연락처',\n    btn: null\n  }];\n  fList.forEach(list => {\n    lists.push(new Fvrlist(list.fid, list.region, list.facility, list.contact, \"삭제\"));\n  }); // 즐겨찾기 삭제 버튼 클릭\n\n  async function handleDelete(userid) {\n    await Post({\n      userid: userid\n    }, '/member/deletefavorites');\n    location.href = \"/member/favorites\";\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Container, {\n    className: \"favorites\"\n  }, __jsx(Title, {\n    title: \"\\uC990\\uACA8\\uCC3E\\uAE30 \\uBAA9\\uB85D\"\n  }), __jsx(\"hr\", {\n    className: \"hr\"\n  }), __jsx(FavoritesList, {\n    lists: lists,\n    onClick: handleDelete\n  })));\n};\n\nexport default Favorites;\ngetLayout(Favorites, {\n  title: 'WAKAUT! 즐겨찾기목록',\n  description: '워크아웃 즐겨찾기목록 페이지'\n});","map":null,"metadata":{},"sourceType":"module"}