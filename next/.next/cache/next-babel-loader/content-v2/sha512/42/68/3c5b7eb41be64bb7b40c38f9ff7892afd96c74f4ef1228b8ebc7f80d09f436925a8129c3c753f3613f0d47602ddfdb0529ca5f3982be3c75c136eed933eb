{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/fullstack/Desktop/TeamWorks/WAKAUT/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/fullstack/Desktop/TeamWorks/WAKAUT/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\fullstack\\\\Desktop\\\\TeamWorks\\\\WAKAUT\\\\next\\\\pages\\\\board\\\\boardlist.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from \"react\";\nimport Alerts from '../../components/alert';\nimport Search from '../../components/search';\nimport { Container } from 'react-bootstrap';\nimport List from '../../components/list';\nimport WriteModal from './write_modal';\nimport getLayout from '../../components/layouts/getLayout';\nimport { Datas } from '../feutils';\n\nvar BoardList = function BoardList(_ref) {\n  _s();\n\n  var boards = _ref.boards;\n\n  var _useState = useState(boards.boards),\n      dts2 = _useState[0],\n      setDts2 = _useState[1];\n\n  var _useState2 = useState(5),\n      pg = _useState2[0],\n      setPg = _useState2[1];\n\n  function handleScroll() {\n    var scrollHeight = document.documentElement.scrollHeight;\n    var scrollTop = document.documentElement.scrollTop;\n    var clientHeight = document.documentElement.clientHeight;\n    var cnt = 1;\n\n    if (scrollTop + clientHeight >= scrollHeight) {\n      cnt++;\n      setPg(cnt * 5);\n    }\n  }\n\n  function dts() {\n    return _dts.apply(this, arguments);\n  }\n\n  function _dts() {\n    _dts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return Datas('/board/boardlist', \"pg=\".concat(pg));\n\n            case 2:\n              res = _context.sent;\n              setDts2(res.boards);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _dts.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    window.addEventListener('scroll', handleScroll, {\n      capture: true\n    });\n    dts();\n    return function () {\n      window.removeEventListener(\"scroll\", handleScroll, {\n        capture: true\n      });\n    };\n  });\n\n  var _useState3 = useState(false),\n      lgShow = _useState3[0],\n      setLgShow = _useState3[1];\n\n  return __jsx(React.Fragment, null, __jsx(Alerts, {\n    color: \"success\",\n    msg: \"\\uD574\\uB2F9 \\uAC8C\\uC2DC\\uD310\\uC740 \\uAD00\\uB9AC\\uC790\\uC5D0\\uC758\\uD574 \\uC2E4\\uC2DC\\uAC04 \\uAD00\\uB9AC\\uB418\\uACE0\\uC788\\uC2B5\\uB2C8\\uB2E4. \\uD5C8\\uC704\\uC0AC\\uC2E4\\uC720\\uD3EC \\uBC0F \\uBD80\\uC801\\uC808\\uD55C \\uD45C\\uD604\\uC740 \\uCC28\\uB2E8\\uB420 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }), __jsx(Search, {\n    cat: ['Content', 'Review'],\n    title: \"All\",\n    btn: ['검색하기', '새글쓰기'],\n    btncol: ['secondary', 'success'],\n    click: [false, function () {\n      setLgShow(true);\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }), __jsx(Container, {\n    className: \"lists\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, console.log(dts2) // boards.boards.map((m,idx)=>{\n  //     return <List key={idx} title={m.title} note={m.content} malcnt={m.cmtcnt} img={true} col='bg-warning' time={m.regdate2} kd={m.category} view={m.views} to={`/board/boardview?bid=${m.bid}`} name={m.name} />\n  // })\n  ), __jsx(WriteModal, {\n    lgShow: lgShow,\n    setLgShow: setLgShow,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }));\n};\n\n_s(BoardList, \"4lHHa2RcTD4mGM2SiWDA7sS7qUU=\");\n\n_c = BoardList;\ngetLayout(BoardList, {\n  title: '다같이 운동해요! WAKAUT!',\n  description: '워크아웃 커뮤니티 게시판입니다.'\n});\nexport var __N_SSP = true;\nexport default BoardList;\n\nvar _c;\n\n$RefreshReg$(_c, \"BoardList\");","map":{"version":3,"sources":["C:/Users/fullstack/Desktop/TeamWorks/WAKAUT/next/pages/board/boardlist.js"],"names":["useEffect","useState","Alerts","Search","Container","List","WriteModal","getLayout","Datas","BoardList","boards","dts2","setDts2","pg","setPg","handleScroll","scrollHeight","document","documentElement","scrollTop","clientHeight","cnt","dts","res","window","addEventListener","capture","removeEventListener","lgShow","setLgShow","console","log","title","description"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport Alerts from '../../components/alert';\r\nimport Search from '../../components/search';\r\nimport {Container} from 'react-bootstrap';\r\nimport List from '../../components/list';\r\nimport WriteModal from './write_modal';\r\nimport getLayout from '../../components/layouts/getLayout';\r\nimport {Datas} from '../feutils';\r\n\r\n\r\nexport async function getServerSideProps(ctx){\r\n    let boards = await Datas('/board/boardlist','pg=5');\r\n    return{props:{boards}};\r\n    \r\n}\r\n\r\nconst BoardList=({boards})=>{\r\n    let [dts2,setDts2] = useState(boards.boards);\r\n    let [pg, setPg] = useState(5);\r\n    function handleScroll(){\r\n        const scrollHeight = document.documentElement.scrollHeight;\r\n        const scrollTop = document.documentElement.scrollTop;\r\n        const clientHeight = document.documentElement.clientHeight;\r\n        let cnt = 1;\r\n        if (scrollTop + clientHeight >= scrollHeight) {\r\n            cnt++;\r\n            setPg(cnt*5);\r\n        }\r\n    }\r\n\r\n    async function dts(){\r\n        let res = await Datas('/board/boardlist',`pg=${pg}`);\r\n        setDts2(res.boards);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        window.addEventListener('scroll', handleScroll, { capture: true });\r\n        dts();\r\n        return ()=>{\r\n            window.removeEventListener(\"scroll\",handleScroll,{ capture: true });\r\n        }\r\n    })\r\n    \r\n    const [lgShow, setLgShow] = useState(false);\r\n    return(\r\n        <>\r\n        <Alerts color='success' msg='해당 게시판은 관리자에의해 실시간 관리되고있습니다. 허위사실유포 및 부적절한 표현은 차단될 수 있습니다.'/>\r\n        <Search cat={['Content','Review']} title='All' btn={['검색하기','새글쓰기']} btncol={['secondary','success']} click={[false,()=>{setLgShow(true)}]}/>\r\n        <Container className=\"lists\">\r\n            {\r\n                console.log(dts2)\r\n                // boards.boards.map((m,idx)=>{\r\n                //     return <List key={idx} title={m.title} note={m.content} malcnt={m.cmtcnt} img={true} col='bg-warning' time={m.regdate2} kd={m.category} view={m.views} to={`/board/boardview?bid=${m.bid}`} name={m.name} />\r\n                // })\r\n            }\r\n        </Container>\r\n        <WriteModal lgShow={lgShow} setLgShow={setLgShow}/>\r\n        </>\r\n    )\r\n}\r\n\r\ngetLayout(BoardList,{title:'다같이 운동해요! WAKAUT!',description:'워크아웃 커뮤니티 게시판입니다.'})\r\nexport default BoardList;\r\n"]},"metadata":{},"sourceType":"module"}