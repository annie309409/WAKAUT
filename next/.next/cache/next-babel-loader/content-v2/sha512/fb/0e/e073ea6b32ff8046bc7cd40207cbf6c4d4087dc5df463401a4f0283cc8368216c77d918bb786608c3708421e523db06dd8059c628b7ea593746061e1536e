{"ast":null,"code":"\"use strict\";\n\nvar _MariaDB = _interopRequireDefault(require(\"./MariaDB\"));\n\nvar _SQLs = _interopRequireDefault(require(\"./SQLs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nclass Board {\n  //게시판 목록출력\n  async select() {\n    let conn = null;\n    let rowData = null;\n\n    try {\n      conn = await _MariaDB.default.makeConn();\n      rowData = await conn.query(_SQLs.default.board.select);\n    } catch (e) {\n      console.log(e);\n    } finally {\n      await _MariaDB.default.closeConn();\n    }\n\n    let result = {\n      'boards': rowData\n    };\n    return result;\n  } //게시글 출력\n\n\n  async selectOne(bid) {\n    let conn = null;\n    let rowData = null;\n    let params = [bid];\n\n    try {\n      conn = await _MariaDB.default.makeConn();\n      rowData = await conn.query(_SQLs.default.board.selectOne, params); //코멘트 조회 및 추가     \n\n      rowData[0].com = await conn.query(_SQLs.default.board.comments, params); //조회수 증가    \n\n      await conn.query(_SQLs.default.board.updateView, params);\n      await conn.commit();\n    } catch (e) {\n      console.log(e);\n    } finally {\n      await _MariaDB.default.closeConn();\n    }\n\n    return rowData;\n  } //코멘트 등록\n\n\n  async insertCmt(bid, uid, cmt) {\n    let conn = null;\n    let rowData = null;\n    let params = [bid, uid, cmt];\n\n    try {\n      await conn.query(`insert into comments (bid,userid,comment) values(11,2,'고정값 강제테스트')`);\n      await conn.commit();\n    } catch (e) {\n      console.log(e);\n    } finally {\n      await _MariaDB.default.closeConn();\n    }\n\n    return rowData;\n  }\n\n}\n\nmodule.exports = Board;","map":{"version":3,"sources":["C:/Users/pc/Desktop/학언/WAKAUT/next/models/board.js"],"names":["Board","select","conn","rowData","mariadb","makeConn","query","SQL","board","e","console","log","closeConn","result","selectOne","bid","params","com","comments","updateView","commit","insertCmt","uid","cmt","module","exports"],"mappings":";;AAAA;;AACA;;;;AAEA,MAAMA,KAAN,CAAW;AACP;AACA,QAAMC,MAAN,GAAc;AACV,QAAIC,IAAI,GAAI,IAAZ;AACA,QAAIC,OAAO,GAAG,IAAd;;AACA,QAAG;AACCD,MAAAA,IAAI,GAAE,MAAME,iBAAQC,QAAR,EAAZ;AACAF,MAAAA,OAAO,GAAI,MAAMD,IAAI,CAACI,KAAL,CAAWC,cAAIC,KAAJ,CAAUP,MAArB,CAAjB;AACH,KAHD,CAGC,OAAOQ,CAAP,EAAU;AACPC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH,KALD,SAKS;AACL,YAAML,iBAAQQ,SAAR,EAAN;AACH;;AACD,QAAIC,MAAM,GAAC;AAAC,gBAAUV;AAAX,KAAX;AACA,WAAOU,MAAP;AACH,GAfM,CAgBP;;;AACA,QAAMC,SAAN,CAAgBC,GAAhB,EAAoB;AAChB,QAAIb,IAAI,GAAI,IAAZ;AACA,QAAIC,OAAO,GAAG,IAAd;AACA,QAAIa,MAAM,GAAG,CAACD,GAAD,CAAb;;AACA,QAAG;AACCb,MAAAA,IAAI,GAAE,MAAME,iBAAQC,QAAR,EAAZ;AACAF,MAAAA,OAAO,GAAI,MAAMD,IAAI,CAACI,KAAL,CAAWC,cAAIC,KAAJ,CAAUM,SAArB,EAA+BE,MAA/B,CAAjB,CAFD,CAGC;;AACAb,MAAAA,OAAO,CAAC,CAAD,CAAP,CAAWc,GAAX,GAAiB,MAAMf,IAAI,CAACI,KAAL,CAAWC,cAAIC,KAAJ,CAAUU,QAArB,EAA8BF,MAA9B,CAAvB,CAJD,CAKC;;AACA,YAAMd,IAAI,CAACI,KAAL,CAAWC,cAAIC,KAAJ,CAAUW,UAArB,EAAgCH,MAAhC,CAAN;AACA,YAAMd,IAAI,CAACkB,MAAL,EAAN;AACH,KARD,CAQC,OAAOX,CAAP,EAAU;AACPC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH,KAVD,SAUS;AACL,YAAML,iBAAQQ,SAAR,EAAN;AACH;;AACD,WAAOT,OAAP;AACH,GAnCM,CAoCP;;;AACA,QAAMkB,SAAN,CAAgBN,GAAhB,EAAoBO,GAApB,EAAwBC,GAAxB,EAA4B;AACxB,QAAIrB,IAAI,GAAI,IAAZ;AACA,QAAIC,OAAO,GAAG,IAAd;AACA,QAAIa,MAAM,GAAG,CAACD,GAAD,EAAKO,GAAL,EAASC,GAAT,CAAb;;AACA,QAAG;AACC,YAAMrB,IAAI,CAACI,KAAL,CAAY,oEAAZ,CAAN;AACA,YAAMJ,IAAI,CAACkB,MAAL,EAAN;AACH,KAHD,CAGC,OAAOX,CAAP,EAAU;AACPC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH,KALD,SAKS;AACL,YAAML,iBAAQQ,SAAR,EAAN;AACH;;AACD,WAAOT,OAAP;AACH;;AAlDM;;AAqDXqB,MAAM,CAACC,OAAP,GAAezB,KAAf","sourcesContent":["import mariadb from './MariaDB';\r\nimport SQL from './SQLs';\r\n\r\nclass Board{\r\n    //게시판 목록출력\r\n    async select(){\r\n        let conn =  null;\r\n        let rowData = null;\r\n        try{\r\n            conn= await mariadb.makeConn();\r\n            rowData  = await conn.query(SQL.board.select);\r\n        }catch (e) {\r\n            console.log(e);\r\n        }finally {\r\n            await mariadb.closeConn();\r\n        }\r\n        let result={'boards': rowData};\r\n        return result;\r\n    }\r\n    //게시글 출력\r\n    async selectOne(bid){\r\n        let conn =  null;\r\n        let rowData = null;\r\n        let params = [bid];\r\n        try{\r\n            conn= await mariadb.makeConn();\r\n            rowData  = await conn.query(SQL.board.selectOne,params);\r\n            //코멘트 조회 및 추가     \r\n            rowData[0].com = await conn.query(SQL.board.comments,params);       \r\n            //조회수 증가    \r\n            await conn.query(SQL.board.updateView,params);\r\n            await conn.commit();\r\n        }catch (e) {\r\n            console.log(e);\r\n        }finally {\r\n            await mariadb.closeConn();\r\n        }\r\n        return rowData;\r\n    }\r\n    //코멘트 등록\r\n    async insertCmt(bid,uid,cmt){\r\n        let conn =  null;\r\n        let rowData = null;\r\n        let params = [bid,uid,cmt];\r\n        try{ \r\n            await conn.query(`insert into comments (bid,userid,comment) values(11,2,'고정값 강제테스트')`);\r\n            await conn.commit();\r\n        }catch (e) {\r\n            console.log(e);\r\n        }finally {\r\n            await mariadb.closeConn();\r\n        }\r\n        return rowData;\r\n    }\r\n}\r\n\r\nmodule.exports=Board;\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"script"}