{"ast":null,"code":"import axios from \"axios\";\nimport { XMLParser } from 'fast-xml-parser';\nexport default (async (req, res) => {\n  // console.log(\"검색한 단어 : \", req.query);\n  const URL = \" https://openapi.gg.go.kr/PubPhstFtM\";\n  const params = {\n    KEY: \"59c361f5fb304a649662ff8ec90e184f\",\n    Type: \"xml\",\n    pIndex: 1,\n    // pSize를 1000으로 설정하고 pIndex를 2로 설정하면 1001~2000까지의 데이터를 가져옴\n    pSize: 1000 // 데이터 요청은 한번에 최대 1000건\n\n  };\n  const headers = {\n    \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.78\"\n  };\n  const xml = await axios.get(URL, {\n    params: params,\n    headers: headers\n  }); // XML 을 JSON 으로 변환\n\n  const parser = new XMLParser();\n  let json = parser.parse(xml.data);\n  let items = json[\"PubPhstFtM\"][\"row\"];\n\n  if (req.query.srch) {\n    items = items.filter(f => f.FACLT_NM.indexOf(req.query.srch.trim()) !== -1);\n  }\n\n  if (req.query.lists) {\n    items = items.map(m => m.FACLT_NM);\n  }\n\n  res.status(200).json(items);\n});","map":{"version":3,"sources":["C:/Users/fullstack/Desktop/TeamWorks/WAKAUT/next/pages/api/main.js"],"names":["axios","XMLParser","req","res","URL","params","KEY","Type","pIndex","pSize","headers","xml","get","parser","json","parse","data","items","query","srch","filter","f","FACLT_NM","indexOf","trim","lists","map","m","status"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,iBAA1B;AAEA,gBAAe,OAAMC,GAAN,EAAUC,GAAV,KAAgB;AAC3B;AACA,QAAMC,GAAG,GAAE,sCAAX;AACA,QAAMC,MAAM,GAAG;AACXC,IAAAA,GAAG,EAAE,kCADM;AAEXC,IAAAA,IAAI,EAAE,KAFK;AAGXC,IAAAA,MAAM,EAAE,CAHG;AAGC;AACZC,IAAAA,KAAK,EAAE,IAJI,CAIE;;AAJF,GAAf;AAMA,QAAMC,OAAO,GAAG;AACZ,kBACI;AAFQ,GAAhB;AAKA,QAAMC,GAAG,GAAG,MAAMX,KAAK,CAACY,GAAN,CAAUR,GAAV,EAAe;AAC7BC,IAAAA,MAAM,EAAEA,MADqB;AAE7BK,IAAAA,OAAO,EAAEA;AAFoB,GAAf,CAAlB,CAd2B,CAmB3B;;AACA,QAAMG,MAAM,GAAG,IAAIZ,SAAJ,EAAf;AACA,MAAIa,IAAI,GAAGD,MAAM,CAACE,KAAP,CAAaJ,GAAG,CAACK,IAAjB,CAAX;AACA,MAAIC,KAAK,GAAGH,IAAI,CAAC,YAAD,CAAJ,CAAmB,KAAnB,CAAZ;;AAEA,MAAGZ,GAAG,CAACgB,KAAJ,CAAUC,IAAb,EAAkB;AACdF,IAAAA,KAAK,GAAGA,KAAK,CAACG,MAAN,CAAaC,CAAC,IAClBA,CAAC,CAACC,QAAF,CAAWC,OAAX,CAAmBrB,GAAG,CAACgB,KAAJ,CAAUC,IAAV,CAAeK,IAAf,EAAnB,MAA4C,CAAC,CADzC,CAAR;AAGH;;AAED,MAAGtB,GAAG,CAACgB,KAAJ,CAAUO,KAAb,EAAmB;AACfR,IAAAA,KAAK,GAAGA,KAAK,CAACS,GAAN,CAAUC,CAAC,IAAGA,CAAC,CAACL,QAAhB,CAAR;AACH;;AACDnB,EAAAA,GAAG,CAACyB,MAAJ,CAAW,GAAX,EAAgBd,IAAhB,CAAqBG,KAArB;AACH,CAlCD","sourcesContent":["import axios from \"axios\";\r\nimport { XMLParser } from 'fast-xml-parser';\r\n\r\nexport default async(req,res)=>{\r\n    // console.log(\"검색한 단어 : \", req.query);\r\n    const URL =\" https://openapi.gg.go.kr/PubPhstFtM\";\r\n    const params = {\r\n        KEY: \"59c361f5fb304a649662ff8ec90e184f\",\r\n        Type: \"xml\",\r\n        pIndex: 1,  // pSize를 1000으로 설정하고 pIndex를 2로 설정하면 1001~2000까지의 데이터를 가져옴\r\n        pSize: 1000, // 데이터 요청은 한번에 최대 1000건\r\n    };\r\n    const headers = {\r\n        \"User-Agent\":\r\n            \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.78\",\r\n    };\r\n\r\n    const xml = await axios.get(URL, {\r\n        params: params,\r\n        headers: headers,\r\n    });\r\n\r\n    // XML 을 JSON 으로 변환\r\n    const parser = new XMLParser();\r\n    let json = parser.parse(xml.data);\r\n    let items = json[\"PubPhstFtM\"][\"row\"];\r\n\r\n    if(req.query.srch){\r\n        items = items.filter(f=>\r\n            f.FACLT_NM.indexOf(req.query.srch.trim())!==-1\r\n        )\r\n    }\r\n\r\n    if(req.query.lists){\r\n        items = items.map(m=> m.FACLT_NM)\r\n    }\r\n    res.status(200).json(items);\r\n}\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}