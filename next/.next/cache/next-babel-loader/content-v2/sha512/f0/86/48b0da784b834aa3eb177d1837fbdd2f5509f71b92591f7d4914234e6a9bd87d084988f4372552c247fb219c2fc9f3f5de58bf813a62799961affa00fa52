{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fullstack\\\\Desktop\\\\TeamWorks\\\\WAKAUT\\\\next\\\\pages\\\\board\\\\boardview.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Container, Form, Button } from \"react-bootstrap\";\nimport List from \"../../components/list\";\nimport Link from \"next/link\";\nimport { useState } from 'react';\nimport WriteModal from \"./write_modal\";\nimport Mgmodal from \"../../components/mgmodal\";\nimport getLayout from '../../components/layouts/getLayout';\nimport { Datas, Post, handleInput } from '../feutils';\nlet title = '';\nlet contents = ''; //ë°ì´í„° ëŒê³ ì˜¤ê¸°!\n\nexport async function getServerSideProps(ctx) {\n  let boards = await Datas(`/board/boardview?bid=${ctx.query.bid}`);\n  return {\n    props: {\n      boards\n    }\n  };\n}\nexport async function del({\n  bid\n}) {\n  let re = Post({\n    bid: bid\n  }, '/board/delete').then(r => r);\n\n  if ((await re).cnt > 0) {\n    alert('ì‚­ì œì™„ë£Œ!!');\n  }\n}\n\nconst Boardview = ({\n  boards\n}) => {\n  const {\n    0: lgShow,\n    1: setLgShow\n  } = useState(false);\n  const {\n    0: mgShow,\n    1: setMgShow\n  } = useState(false);\n  const {\n    0: reply,\n    1: setReply\n  } = useState();\n  const {\n    0: cmts,\n    1: setCmts\n  } = useState(boards[0].com);\n  const {\n    0: cnfirm,\n    1: setCnfirm\n  } = useState(false);\n  let bd = boards[0]; //ë°ì´í„° ë“±ë¡í•˜ê¸°\n\n  async function write(e, {\n    bid,\n    userid,\n    comment\n  }) {\n    e.preventDefault();\n\n    if (reply != '') {\n      Post({\n        bid: bid,\n        userid: userid,\n        comment: comment\n      }, '/board/repwrite');\n      dts();\n      setReply('');\n    } else {\n      alert('ì•„ë¬´ê²ƒë„ ì…ë ¥í•˜ì§€ ì•Šì•˜ì–´ìš”ğŸ˜¥');\n    }\n  } //ë“±ë¡ í›„ ëŒê³ ì˜¤ê¸°\n\n\n  async function dts() {\n    let res = await Datas(`/board/boardview`, `bid=${bd.bid}`);\n    setCmts(res[0].com);\n  } //ë¦¬í”Œ ì‚­ì œí•˜ê¸°\n\n\n  function del(cid) {\n    Post({\n      cid: cid\n    }, '/board/repwrite');\n    dts();\n  } //ê²Œì‹œê¸€ ì‚­ì œí•˜ê¸°\n\n\n  if (cnfirm) {\n    del(bd.bid);\n  }\n\n  ;\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"brdview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, __jsx(\"header\", {\n    className: \"bg-secondary pt-5 pb-4 brdview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }), __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, __jsx(List, {\n    title: bd.title,\n    kd: bd.category,\n    time: bd.regdate2,\n    view: bd.views + 1,\n    name: bd.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }))), __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    className: \"viewnote\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, bd.content), __jsx(\"div\", {\n    className: \"replay p-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, cmts.map((m, idx) => {\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"txtLft d-flex\",\n      key: idx,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 34\n      }\n    }, __jsx(\"h5\", {\n      key: m + idx + idx,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 37\n      }\n    }, m.name), __jsx(\"p\", {\n      className: \"ms-5\",\n      key: m + idx,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 37\n      }\n    }, m.comment, \" \", __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 81\n      }\n    }, m.regdate2)), __jsx(\"p\", {\n      className: \"ms-3 delRep\",\n      onClick: () => {\n        del(m.cid);\n      },\n      key: m + m + idx,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 37\n      }\n    }, \"X\")));\n  }), __jsx(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"reTxt d-flex align-items-end mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Control, {\n    as: \"textarea\",\n    placeholder: \"\\uB313\\uAE00\\uC740 \\uD55C\\uBC88 \\uB2EC\\uBA74 \\uC0AD\\uC81C\\uAC00 \\uBD88\\uAC00\\uB2A5\\uD558\\uB2F5\\uB2C8\\uB2F9 \\uD83D\\uDC6E\\u200D\\u2642\\uFE0F\\uD83D\\uDC6E\\u200D\\u2640\\uFE0F \",\n    style: {\n      height: '80px',\n      width: '90%'\n    },\n    value: reply,\n    onChange: e => {\n      handleInput(setReply, e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }), __jsx(\"button\", {\n    className: \"btn btn-success ms-3\",\n    type: \"submit\",\n    onClick: e => {\n      write(e, {\n        bid: bd.bid,\n        userid: 2,\n        comment: reply\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }, \"\\uB313\\uAE00 \\uB4F1\\uB85D\")))), __jsx(\"div\", {\n    className: \"btns mt-4 mb-4 d-flex  justify-content-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    className: \"ms-2\",\n    variant: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, __jsx(Link, {\n    href: \"/board/boardlist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 64\n    }\n  }, \"\\uBAA9\\uB85D\\uC73C\\uB85C\")), __jsx(Button, {\n    className: \"ms-2\",\n    variant: \"success\",\n    onClick: () => {\n      setLgShow(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, \"\\uC218\\uC815\\uD558\\uAE30\"), __jsx(Button, {\n    className: \"ms-2\",\n    variant: \"secondary\",\n    onClick: () => {\n      setMgShow(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, \"\\uC0AD\\uC81C\\uD558\\uAE30\"), __jsx(Button, {\n    className: \"ms-2\",\n    variant: \"danger\",\n    onClick: () => {\n      setMgShow(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, \"\\uAC15\\uC81C\\uC0AD\\uC81C\")), __jsx(Mgmodal, {\n    LgShow: mgShow,\n    setLgShow: setMgShow,\n    setCnfirm: setCnfirm,\n    title: \"\\uAC8C\\uC2DC\\uAE00 \\uC0AD\\uC81C\",\n    msg: \"\\uC815\\uB9D0 \\uC0AD\\uC81C\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }), __jsx(WriteModal, {\n    title: boards[0].title,\n    note: boards[0].content,\n    bid: boards[0].bid,\n    setLgShow: setLgShow,\n    lgShow: lgShow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 16\n    }\n  })));\n};\n\ngetLayout(Boardview, {\n  title: title,\n  description: contents\n});\nexport default Boardview;","map":{"version":3,"sources":["C:/Users/fullstack/Desktop/TeamWorks/WAKAUT/next/pages/board/boardview.js"],"names":["Container","Form","Button","List","Link","useState","WriteModal","Mgmodal","getLayout","Datas","Post","handleInput","title","contents","getServerSideProps","ctx","boards","query","bid","props","del","re","then","r","cnt","alert","Boardview","lgShow","setLgShow","mgShow","setMgShow","reply","setReply","cmts","setCmts","com","cnfirm","setCnfirm","bd","write","e","userid","comment","preventDefault","dts","res","cid","category","regdate2","views","name","content","map","m","idx","height","width","description"],"mappings":"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","sourcesContent":["import { Container,Form,Button } from \"react-bootstrap\";\r\nimport List from \"../../components/list\";\r\nimport Link from \"next/link\";\r\nimport {useState} from 'react';\r\nimport WriteModal from \"./write_modal\";\r\nimport Mgmodal from \"../../components/mgmodal\";\r\nimport getLayout from '../../components/layouts/getLayout';\r\nimport {Datas,Post,handleInput} from '../feutils';\r\nlet title='';\r\nlet contents ='';\r\n\r\n\r\n//ë°ì´í„° ëŒê³ ì˜¤ê¸°!\r\nexport async function getServerSideProps(ctx){\r\n    let boards = await Datas(`/board/boardview?bid=${ctx.query.bid}`);\r\n    return{props:{boards}};\r\n}\r\n\r\nexport async function del({bid}){\r\n    let re = Post({bid:bid},'/board/delete').then(r=>r);\r\n    if((await re).cnt >0) {\r\n        alert('ì‚­ì œì™„ë£Œ!!');\r\n    }\r\n}\r\n\r\nconst Boardview=({boards})=>{\r\n    const [lgShow, setLgShow] = useState(false);\r\n    const [mgShow, setMgShow] = useState(false);\r\n    const [reply, setReply] = useState();\r\n    const [cmts,setCmts] = useState(boards[0].com);\r\n    const [cnfirm, setCnfirm] = useState(false);\r\n    let bd = boards[0];\r\n\r\n    //ë°ì´í„° ë“±ë¡í•˜ê¸°\r\n    async function write(e,{bid,userid,comment}){\r\n        e.preventDefault();\r\n\r\n        if(reply!=''){\r\n            Post({bid:bid,userid:userid,comment:comment},'/board/repwrite');\r\n            dts();\r\n            setReply('');\r\n        }else{\r\n            alert('ì•„ë¬´ê²ƒë„ ì…ë ¥í•˜ì§€ ì•Šì•˜ì–´ìš”ğŸ˜¥')\r\n        }\r\n    }\r\n    //ë“±ë¡ í›„ ëŒê³ ì˜¤ê¸°\r\n    async function dts(){\r\n        let res = await Datas(`/board/boardview`,`bid=${bd.bid}`);\r\n        setCmts (res[0].com); \r\n    }\r\n    //ë¦¬í”Œ ì‚­ì œí•˜ê¸°\r\n    function del(cid){\r\n        Post({cid:cid},'/board/repwrite');\r\n        dts();\r\n    }\r\n\r\n    //ê²Œì‹œê¸€ ì‚­ì œí•˜ê¸°\r\n    if(cnfirm){\r\n        del(bd.bid)\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"brdview\">\r\n                <header className=\"bg-secondary pt-5 pb-4 brdview\">\r\n                </header>\r\n                <Container>\r\n                    <List title={bd.title} kd={bd.category} time={bd.regdate2} view={bd.views+1} name={bd.name}/>\r\n                </Container>\r\n            </div>\r\n            \r\n            <Container>\r\n                <p className=\"viewnote\">{bd.content}</p>\r\n                <div className=\"replay p-5\">\r\n                    {\r\n                        cmts.map((m,idx)=>{\r\n                            return(\r\n                                <>\r\n                                 <div className=\"txtLft d-flex\" key={idx}>\r\n                                    <h5 key={m+idx+idx}>{m.name}</h5>\r\n                                    <p className=\"ms-5\" key={m+idx}>{m.comment} <small>{m.regdate2}</small></p>\r\n                                    <p className=\"ms-3 delRep\" onClick={()=>{del(m.cid)}} key={m+m+idx}>X</p>\r\n                                 </div>\r\n                                </>\r\n                           )\r\n                        })\r\n                    }\r\n                <Form>\r\n                    <div className=\"reTxt d-flex align-items-end mt-4\"> \r\n                        <Form.Control as=\"textarea\" placeholder=\"ëŒ“ê¸€ì€ í•œë²ˆ ë‹¬ë©´ ì‚­ì œê°€ ë¶ˆê°€ëŠ¥í•˜ë‹µë‹ˆë‹¹ ğŸ‘®â€â™‚ï¸ğŸ‘®â€â™€ï¸ \" style={{ height: '80px' ,width:'90%' }} value={reply} onChange={(e)=>{handleInput(setReply,e)}} />\r\n                        <button className=\"btn btn-success ms-3\" type=\"submit\" onClick={(e)=>{ write(e,{bid:bd.bid,userid:2,comment:reply})}}>ëŒ“ê¸€ ë“±ë¡</button>\r\n                    </div>\r\n                </Form>\r\n                </div>\r\n                <div className=\"btns mt-4 mb-4 d-flex  justify-content-end\">\r\n                    \r\n                    <Button className=\"ms-2\" variant=\"primary\"><Link href=\"/board/boardlist\">ëª©ë¡ìœ¼ë¡œ</Link></Button>\r\n                    <Button className=\"ms-2\" variant=\"success\" onClick={()=>{setLgShow(true)}}>ìˆ˜ì •í•˜ê¸°</Button>\r\n                    <Button className=\"ms-2\" variant=\"secondary\" onClick={()=>{setMgShow(true)}}>ì‚­ì œí•˜ê¸°</Button>\r\n                    <Button className=\"ms-2\" variant=\"danger\" onClick={()=>{setMgShow(true)}}>ê°•ì œì‚­ì œ</Button>\r\n                </div>\r\n                <Mgmodal LgShow={mgShow} setLgShow={setMgShow} setCnfirm={setCnfirm} title=\"ê²Œì‹œê¸€ ì‚­ì œ\" msg=\"ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\"/>\r\n               <WriteModal title={boards[0].title} note={boards[0].content} bid={boards[0].bid} setLgShow={setLgShow} lgShow={lgShow}/>\r\n            </Container>\r\n        </>\r\n    )\r\n}\r\n\r\n    getLayout(Boardview,{title:title,description:contents});\r\n\r\nexport default Boardview;\r\n"]},"metadata":{},"sourceType":"module"}