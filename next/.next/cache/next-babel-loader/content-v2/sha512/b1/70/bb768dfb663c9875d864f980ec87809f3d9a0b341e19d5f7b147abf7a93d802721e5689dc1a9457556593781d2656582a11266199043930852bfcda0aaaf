{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/pc/Desktop/\\uD559\\uC5B8/WAKAUT/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/pc/Desktop/\\uD559\\uC5B8/WAKAUT/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\\\uD559\\uC5B8\\\\WAKAUT\\\\next\\\\pages\\\\board\\\\boardview.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Container, Form, Button } from \"react-bootstrap\";\nimport List from \"../../components/list\";\nimport Link from \"next/link\";\nimport { useState } from 'react';\nimport WriteModal from \"./write_modal\";\nimport Mgmodal from \"../../components/mgmodal\";\nimport getLayout from '../../components/layouts/getLayout';\nimport { Datas, Post, handleInput } from '../../components/feutils';\nvar title = '';\nvar contents = ''; //데이터 끌고오기!\n\nvar Boardview = function Boardview(_ref) {\n  _s();\n\n  var boards = _ref.boards,\n      session = _ref.session,\n      atlists = _ref.atlists;\n\n  var _useState = useState(false),\n      lgShow = _useState[0],\n      setLgShow = _useState[1];\n\n  var _useState2 = useState(false),\n      mgShow = _useState2[0],\n      setMgShow = _useState2[1];\n\n  var _useState3 = useState(),\n      reply = _useState3[0],\n      setReply = _useState3[1];\n\n  var _useState4 = useState(boards[0].com),\n      cmts = _useState4[0],\n      setCmts = _useState4[1];\n\n  var _useState5 = useState(false),\n      cnfirm = _useState5[0],\n      setCnfirm = _useState5[1];\n\n  var _useState6 = useState(session.userid),\n      uid = _useState6[0],\n      setUid = _useState6[1];\n\n  var bd = boards[0]; //데이터 등록하기\n\n  function write(_x, _x2) {\n    return _write.apply(this, arguments);\n  } //등록 후 끌고오기\n\n\n  function _write() {\n    _write = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e, _ref2) {\n      var bid, userid, comment, dt;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              bid = _ref2.bid, userid = _ref2.userid, comment = _ref2.comment;\n              e.preventDefault();\n\n              if (!(reply != '')) {\n                _context3.next = 12;\n                break;\n              }\n\n              dt = Post({\n                bid: bid,\n                userid: userid,\n                comment: comment\n              }, '/board/repwrite').then(function (r) {\n                return r;\n              });\n              _context3.next = 6;\n              return dt;\n\n            case 6:\n              _context3.t0 = _context3.sent.cnt;\n\n              if (!(_context3.t0 > 0)) {\n                _context3.next = 9;\n                break;\n              }\n\n              dts();\n\n            case 9:\n              setReply('');\n              _context3.next = 13;\n              break;\n\n            case 12:\n              alert('아무것도 입력하지 않았어요😥');\n\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _write.apply(this, arguments);\n  }\n\n  function dts() {\n    return _dts.apply(this, arguments);\n  } //리플 삭제하기\n\n\n  function _dts() {\n    _dts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return Datas(\"/board/boardview\", \"bid=\".concat(bd.bid));\n\n            case 2:\n              res = _context4.sent;\n              setCmts(res[0].com);\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _dts.apply(this, arguments);\n  }\n\n  function del(cid) {\n    Post({\n      cid: cid\n    }, '/board/repwrite');\n    dts();\n  } //소셜사용자용 \n\n\n  function selId(_x3) {\n    return _selId.apply(this, arguments);\n  }\n\n  function _selId() {\n    _selId = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(uid) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return Datas('/board/boardlist', \"userid=\".concat(uid)).then(function (res) {\n                return res;\n              });\n\n            case 2:\n              res = _context5.sent;\n              _context5.next = 5;\n              return res;\n\n            case 5:\n              return _context5.abrupt(\"return\", _context5.sent);\n\n            case 6:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _selId.apply(this, arguments);\n  }\n\n  if (uid > 1000000000) {\n    var tt = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.t0 = setUid;\n                _context.next = 3;\n                return test;\n\n              case 3:\n                _context.t1 = _context.sent[0].uid;\n                (0, _context.t0)(_context.t1);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function tt() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    var test = selId(uid);\n    tt();\n  } //게시글 삭제하기\n\n\n  if (cnfirm) {\n    var delBD = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var dt;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                dt = Post({\n                  bid: bd.bid\n                }, '/board/delete').then(function (r) {\n                  return r;\n                });\n                _context2.next = 3;\n                return dt;\n\n              case 3:\n                _context2.t0 = _context2.sent.cnt;\n\n                if (!(_context2.t0 > 0)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                location.href = 'http://localhost:3000/board/boardlist';\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function delBD() {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    delBD();\n  }\n\n  ;\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"brdview\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, __jsx(\"header\", {\n    className: \"bg-secondary pt-5 pb-4 brdview\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }), __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, __jsx(List, {\n    title: bd.title,\n    kd: bd.category,\n    time: bd.regdate2,\n    view: bd.views + 1,\n    name: bd.name,\n    cat: bd.facility_name,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }))), __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    className: \"viewnote\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, bd.content), __jsx(\"div\", {\n    className: \"replay p-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, cmts.map(function (m, idx) {\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"txtLft d-flex\",\n      key: idx,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 34\n      }\n    }, __jsx(\"h5\", {\n      key: m + idx + idx,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 37\n      }\n    }, m.name), __jsx(\"p\", {\n      className: \"ms-5\",\n      key: m + idx,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 37\n      }\n    }, m.comment, \" \", __jsx(\"small\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 81\n      }\n    }, m.regdate2)), session.name === m.name ? __jsx(\"p\", {\n      className: \"ms-3 delRep\",\n      onClick: function onClick() {\n        del(m.cid);\n      },\n      key: m + m + idx,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 65\n      }\n    }, \"X\") : '', session.name === 'admin' ? __jsx(\"p\", {\n      className: \"ms-3 delRep\",\n      onClick: function onClick() {\n        del(m.cid);\n      },\n      key: m + m + idx,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 66\n      }\n    }, \"X\") : ''));\n  }), __jsx(Form, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"reTxt d-flex align-items-end mt-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, __jsx(Form.Control, {\n    as: \"textarea\",\n    placeholder: \"\\uB313\\uAE00\\uC740 \\uD55C\\uBC88 \\uB2EC\\uBA74 \\uC0AD\\uC81C\\uAC00 \\uBD88\\uAC00\\uB2A5\\uD558\\uB2F5\\uB2C8\\uB2F9 \\uD83D\\uDC6E\\u200D\\u2642\\uFE0F\\uD83D\\uDC6E\\u200D\\u2640\\uFE0F \",\n    style: {\n      height: '80px',\n      width: '90%'\n    },\n    value: reply,\n    onChange: function onChange(e) {\n      handleInput(setReply, e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }), __jsx(\"button\", {\n    className: \"btn btn-success ms-3\",\n    type: \"submit\",\n    onClick: function onClick(e) {\n      write(e, {\n        bid: bd.bid,\n        userid: uid,\n        comment: reply\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, \"\\uB313\\uAE00 \\uB4F1\\uB85D\")))), __jsx(\"div\", {\n    className: \"btns mt-4 mb-4 d-flex  justify-content-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    className: \"ms-2\",\n    variant: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }, __jsx(Link, {\n    href: \"/board/boardlist\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 64\n    }\n  }, \"\\uBAA9\\uB85D\\uC73C\\uB85C\")), session.name === bd.name ? __jsx(Button, {\n    className: \"ms-2\",\n    variant: \"success\",\n    onClick: function onClick() {\n      setLgShow(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 47\n    }\n  }, \"\\uC218\\uC815\\uD558\\uAE30\") : '', session.name === bd.name ? __jsx(Button, {\n    className: \"ms-2\",\n    variant: \"secondary\",\n    onClick: function onClick() {\n      setMgShow(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 47\n    }\n  }, \"\\uC0AD\\uC81C\\uD558\\uAE30\") : '', session.name === 'admin' ? __jsx(Button, {\n    className: \"ms-2\",\n    variant: \"danger\",\n    onClick: function onClick() {\n      setMgShow(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 47\n    }\n  }, \"\\uAC15\\uC81C\\uC0AD\\uC81C\") : ''), __jsx(Mgmodal, {\n    LgShow: mgShow,\n    setLgShow: setMgShow,\n    setCnfirm: setCnfirm,\n    title: \"\\uAC8C\\uC2DC\\uAE00 \\uC0AD\\uC81C\",\n    msg: \"\\uC815\\uB9D0 \\uC0AD\\uC81C\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }), __jsx(WriteModal, {\n    title: boards[0].title,\n    note: boards[0].content,\n    bid: boards[0].bid,\n    setLgShow: setLgShow,\n    lgShow: lgShow,\n    sename: session.name,\n    seid: session.userid,\n    atlists: atlists,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 16\n    }\n  })));\n};\n\n_s(Boardview, \"kR358KLIJqWUoCdtndYbMe725w4=\");\n\n_c = Boardview;\ngetLayout(Boardview, {\n  title: title,\n  description: contents\n});\nexport var __N_SSP = true;\nexport default Boardview;\n\nvar _c;\n\n$RefreshReg$(_c, \"Boardview\");","map":{"version":3,"sources":["C:/Users/pc/Desktop/학언/WAKAUT/next/pages/board/boardview.js"],"names":["Container","Form","Button","List","Link","useState","WriteModal","Mgmodal","getLayout","Datas","Post","handleInput","title","contents","Boardview","boards","session","atlists","lgShow","setLgShow","mgShow","setMgShow","reply","setReply","com","cmts","setCmts","cnfirm","setCnfirm","userid","uid","setUid","bd","write","e","bid","comment","preventDefault","dt","then","r","cnt","dts","alert","res","del","cid","selId","tt","test","delBD","location","href","category","regdate2","views","name","facility_name","content","map","m","idx","height","width","description"],"mappings":"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","sourcesContent":["import { Container,Form,Button } from \"react-bootstrap\";\r\nimport List from \"../../components/list\";\r\nimport Link from \"next/link\";\r\nimport {useState} from 'react';\r\nimport WriteModal from \"./write_modal\";\r\nimport Mgmodal from \"../../components/mgmodal\";\r\nimport getLayout from '../../components/layouts/getLayout';\r\nimport {Datas,Post,handleInput} from '../../components/feutils';\r\nlet title='';\r\nlet contents ='';\r\n\r\n\r\n//데이터 끌고오기!\r\nexport async function getServerSideProps(ctx){\r\n    let boards = await Datas(`/board/boardview?bid=${ctx.query.bid}`);\r\n    let atlists = await Datas(`/main?lists=y`);\r\n    return{props:{boards,atlists}};   \r\n}\r\nconst Boardview=({boards,session,atlists})=>{\r\n    const [lgShow, setLgShow] = useState(false);\r\n    const [mgShow, setMgShow] = useState(false);\r\n    const [reply, setReply] = useState();\r\n    const [cmts,setCmts] = useState(boards[0].com);\r\n    const [cnfirm, setCnfirm] = useState(false);\r\n    const [uid, setUid] = useState(session.userid);\r\n    let bd = boards[0];\r\n    //데이터 등록하기\r\n    async function write(e,{bid,userid,comment}){\r\n        e.preventDefault();\r\n        if(reply!=''){\r\n            let dt = Post({bid:bid,userid:userid,comment:comment},'/board/repwrite').then(r=>r);\r\n            if((await dt).cnt > 0) dts();\r\n            setReply('');\r\n        }else{\r\n            alert('아무것도 입력하지 않았어요😥')\r\n        }\r\n    }\r\n    //등록 후 끌고오기\r\n    async function dts(){\r\n        let res = await Datas(`/board/boardview`,`bid=${bd.bid}`);\r\n        setCmts (res[0].com); \r\n    }\r\n    //리플 삭제하기\r\n    function del(cid){\r\n        Post({cid:cid},'/board/repwrite');\r\n        dts();\r\n    }\r\n\r\n    //소셜사용자용 \r\n    async function selId (uid){\r\n        let res = await Datas('/board/boardlist',`userid=${uid}`).then(res=>res);\r\n        return await res;\r\n    }\r\n    \r\n    if(uid>1000000000){\r\n        let test = selId(uid);\r\n        async function tt(){\r\n            setUid((await test)[0].uid);\r\n        }\r\n        tt();\r\n    }\r\n\r\n    //게시글 삭제하기\r\n    if(cnfirm){\r\n        async function delBD(){\r\n            let dt = Post({bid:bd.bid},'/board/delete').then(r=>r);\r\n            if((await dt).cnt > 0 ){\r\n                location.href ='http://localhost:3000/board/boardlist';\r\n            }\r\n        }\r\n        delBD();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"brdview\">\r\n                <header className=\"bg-secondary pt-5 pb-4 brdview\">\r\n                </header>\r\n                <Container>\r\n                    <List title={bd.title} kd={bd.category} time={bd.regdate2} view={bd.views+1} name={bd.name} cat={bd.facility_name}/>\r\n                </Container>\r\n            </div>\r\n            <Container>\r\n                <p className=\"viewnote\">{bd.content}</p>\r\n                <div className=\"replay p-5\">\r\n                    {\r\n                        cmts.map((m,idx)=>{\r\n                            return(\r\n                                <>\r\n                                 <div className=\"txtLft d-flex\" key={idx}>\r\n                                    <h5 key={m+idx+idx}>{m.name}</h5>\r\n                                    <p className=\"ms-5\" key={m+idx}>{m.comment} <small>{m.regdate2}</small></p>\r\n                                    {(session.name === m.name)? <p className=\"ms-3 delRep\" onClick={()=>{del(m.cid)}} key={m+m+idx}>X</p>:''}\r\n                                    {(session.name === 'admin')? <p className=\"ms-3 delRep\" onClick={()=>{del(m.cid)}} key={m+m+idx}>X</p>:''}\r\n                                 </div>\r\n                                </>\r\n                           )\r\n                        })\r\n                    }\r\n                <Form>\r\n                    <div className=\"reTxt d-flex align-items-end mt-4\"> \r\n                        <Form.Control as=\"textarea\" placeholder=\"댓글은 한번 달면 삭제가 불가능하답니당 👮‍♂️👮‍♀️ \" style={{ height: '80px' ,width:'90%' }} value={reply} onChange={(e)=>{handleInput(setReply,e)}} />\r\n                        <button className=\"btn btn-success ms-3\" type=\"submit\" onClick={(e)=>{ write(e,{bid:bd.bid,userid:uid,comment:reply})}}>댓글 등록</button>\r\n                    </div>\r\n                </Form>\r\n                </div>\r\n                <div className=\"btns mt-4 mb-4 d-flex  justify-content-end\">\r\n                    \r\n                    <Button className=\"ms-2\" variant=\"primary\"><Link href=\"/board/boardlist\">목록으로</Link></Button>\r\n                    {(session.name===bd.name)?<Button className=\"ms-2\" variant=\"success\" onClick={()=>{setLgShow(true)}} >수정하기</Button>:''}\r\n                    {(session.name===bd.name)?<Button className=\"ms-2\" variant=\"secondary\" onClick={()=>{setMgShow(true)}} >삭제하기</Button>:''}\r\n                    {(session.name==='admin')?<Button className=\"ms-2\" variant=\"danger\" onClick={()=>{setMgShow(true)}} >강제삭제</Button> : ''}\r\n                </div>\r\n                <Mgmodal LgShow={mgShow} setLgShow={setMgShow} setCnfirm={setCnfirm} title=\"게시글 삭제\" msg=\"정말 삭제하시겠습니까?\"/>\r\n               <WriteModal title={boards[0].title} note={boards[0].content} bid={boards[0].bid} setLgShow={setLgShow} lgShow={lgShow} sename={session.name} seid={session.userid}  atlists={atlists}/>\r\n            </Container>\r\n        </>\r\n    )\r\n}\r\n\r\ngetLayout(Boardview,{title:title,description:contents});\r\n\r\nexport default Boardview;\r\n"]},"metadata":{},"sourceType":"module"}