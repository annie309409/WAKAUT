{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/fullstack/Desktop/TeamWorks/WAKAUT/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/fullstack/Desktop/TeamWorks/WAKAUT/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Modal from '../../components/modal';\nimport { Form, FloatingLabel, Button } from 'react-bootstrap';\nimport Selection from '../../components/selection';\nimport { Post, handleInput } from '../../components/feutils';\nimport { useState } from 'react';\n\nvar WriteModal = function WriteModal(props) {\n  var _useState = useState(props.title),\n      title = _useState[0],\n      setTitle = _useState[1];\n\n  var _useState2 = useState(props.note),\n      note = _useState2[0],\n      setNote = _useState2[1];\n\n  var _useState3 = useState(props.category),\n      category = _useState3[0],\n      setCategory = _useState3[1];\n\n  var _useState4 = useState(props.facility),\n      facility = _useState4[0],\n      setFacility = _useState4[1];\n\n  function write(_x, _x2) {\n    return _write.apply(this, arguments);\n  }\n\n  function _write() {\n    _write = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e, _ref) {\n      var bid, title, userid, content, category, facility, dt;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              bid = _ref.bid, title = _ref.title, userid = _ref.userid, content = _ref.content, category = _ref.category, facility = _ref.facility;\n              e.preventDefault();\n\n              if (!(category == undefined || facility == undefined)) {\n                _context.next = 6;\n                break;\n              }\n\n              alert('카테고리 및 운동장소를 선택해주세요!');\n              _context.next = 28;\n              break;\n\n            case 6:\n              if (!(title == undefined || content == undefined)) {\n                _context.next = 10;\n                break;\n              }\n\n              alert('제목 및 컨텐츠를 입력해주세요!');\n              _context.next = 28;\n              break;\n\n            case 10:\n              dt = Post({\n                bid: bid,\n                title: title,\n                userid: userid,\n                content: content,\n                category: category,\n                facility: facility\n              }, '/board/write').then(function (res) {\n                return res;\n              });\n              props.setLgShow(false);\n              _context.t0 = console;\n              _context.next = 15;\n              return dt;\n\n            case 15:\n              _context.t1 = _context.sent;\n\n              _context.t0.log.call(_context.t0, _context.t1);\n\n              _context.t2 = bid !== undefined;\n\n              if (!_context.t2) {\n                _context.next = 23;\n                break;\n              }\n\n              _context.next = 21;\n              return dt;\n\n            case 21:\n              _context.t3 = _context.sent.cnt;\n              _context.t2 = _context.t3 === 1;\n\n            case 23:\n              if (!_context.t2) {\n                _context.next = 27;\n                break;\n              }\n\n              location.href = \"http://localhost:3000/board/boardview?bid=\".concat(bid);\n              _context.next = 28;\n              break;\n\n            case 27:\n              location.href = \"http://localhost:3000/board/boardlist\";\n\n            case 28:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _write.apply(this, arguments);\n  }\n\n  return __jsx(Modal, {\n    lgShow: props.lgShow,\n    setLgShow: props.setLgShow,\n    size: \"lg\"\n  }, __jsx(Form, null, __jsx(FloatingLabel, {\n    controlId: \"title\",\n    label: \"\\uC81C\\uBAA9\"\n  }, __jsx(Form.Control, {\n    className: \"mt-2\",\n    type: \"text\",\n    placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n    value: title,\n    onChange: function onChange(e) {\n      return handleInput(setTitle, e);\n    }\n  })), __jsx(FloatingLabel, {\n    controlId: \"writer\",\n    label: \"\\uC791\\uC131\\uC790\"\n  }, __jsx(Form.Control, {\n    className: \"mt-2 mb-2\",\n    type: \"text\",\n    value: props.sename,\n    readOnly: true\n  })), __jsx(\"div\", {\n    className: \"d-flex\"\n  }, __jsx(Selection, {\n    title: \"\\uB9D0\\uBA38\\uB9AC\\uB97C \\uC120\\uD0DD\\uD558\\uC138\\uC694\",\n    cat: ['community', 'review'],\n    change: setCategory\n  }), __jsx(Selection, {\n    title: \"\\uC704\\uCE58\\uB97C \\uC120\\uD0DD\\uD558\\uC138\\uC694\",\n    cat: props.atlists,\n    change: setFacility\n  })), __jsx(FloatingLabel, {\n    controlId: \"textarea\",\n    label: \"\\uC0C1\\uB300\\uB97C \\uBC30\\uB824\\uD574\\uC8FC\\uC138\\uC694!\"\n  }, __jsx(Form.Control, {\n    className: \"mt-2\",\n    as: \"textarea\",\n    placeholder: \"Leave a comment here\",\n    style: {\n      height: '250px'\n    },\n    value: note,\n    onChange: function onChange(e) {\n      return handleInput(setNote, e);\n    }\n  })), __jsx(Form.Group, {\n    controlId: \"formFileMultiple\",\n    className: \"mb-3\"\n  }, __jsx(Form.Control, {\n    className: \"mt-2\",\n    type: \"file\",\n    accept: \".gif, .jpg, .png\",\n    multiple: true\n  })), __jsx(\"div\", {\n    className: \"btns d-flex justify-content-end\"\n  }, __jsx(Button, {\n    type: \"reset\",\n    variant: \"secondary\"\n  }, \"\\uB2E4\\uC2DC\\uC4F0\\uAE30\"), __jsx(Button, {\n    type: \"submit\",\n    variant: \"success\",\n    className: \"ms-2\",\n    onClick: function onClick(e) {\n      return write(e, {\n        title: title,\n        userid: props.seid,\n        content: note,\n        category: category,\n        facility: facility,\n        bid: props.bid\n      });\n    }\n  }, props.title ? '수정하기' : '글 올리기'))));\n};\n\nexport default WriteModal;","map":null,"metadata":{},"sourceType":"module"}